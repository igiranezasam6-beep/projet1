{% extends 'base.html' %}

{% block content %}
<div class="card mb-4">
    <div class="card-body">
        <h2 class="card-title">{{ discussion.title }}</h2>
        <h6 class="card-subtitle mb-2 text-muted">Par {{ discussion.author.username }} | {{ discussion.subject }} - {{ discussion.level }}</h6>
        <p class="card-text">{{ discussion.content }}</p>
    </div>
</div>

<h3>Commentaires</h3>
<div class="mb-4">
    {% for comment in comments %}
    <div class="card mb-2">
        <div class="card-body">
            <h6 class="card-subtitle mb-2 text-muted">{{ comment.author.username }} - {{ comment.created_at|timesince }}</h6>
            <p class="card-text">{{ comment.content }}</p>
        </div>
    </div>
    {% empty %}
    <p>Soyez le premier à commenter !</p>
    {% endfor %}
</div>

{% if user.is_authenticated %}
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Répondre</button>
</form>
{% else %}
<p><a href="{% url 'login' %}">Connectez-vous</a> pour répondre.</p>
{% endif %}
{% endblock %}
