{% extends "base.html" %}

{% block title %}Forum · EduBurundi{% endblock %}

{% block content %}
  <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3">
    <h1 class="h4 fw-semibold mb-0">Forum</h1>
    {% if user.is_authenticated %}
      <a class="btn btn-primary" href="{% url 'forum_topic_create' %}">Nouveau sujet</a>
    {% else %}
      <a class="btn btn-outline-primary" href="{% url 'login' %}">Se connecter pour poster</a>
    {% endif %}
  </div>

  <div class="list-group">
    {% for t in topics %}
      <a class="list-group-item list-group-item-action" href="{% url 'forum_topic_detail' t.id %}">
        <div class="d-flex justify-content-between gap-2">
          <div>
            <div class="fw-semibold">{{ t.title }}</div>
            <div class="small text-secondary">
              {{ t.subject }}{% if t.school_level %} · {{ t.school_level }}{% endif %}
            </div>
          </div>
          <div class="small text-secondary text-end">
            {{ t.created_at|date:"d/m/Y" }}<br />
            {{ t.posts.count }} réponse(s)
          </div>
        </div>
      </a>
    {% empty %}
      <div class="alert alert-info mb-0">Aucun sujet créé pour le moment.</div>
    {% endfor %}
  </div>
{% endblock %}

